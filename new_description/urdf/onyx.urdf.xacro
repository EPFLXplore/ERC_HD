<?xml version="1.0" ?>
<robot name="onyx" xmlns:xacro="http://www.ros.org/wiki/xacro">

<xacro:include filename="$(find new_description)/urdf/materials.xacro" />
<!-- <xacro:include filename="$(find new_description)/urdf/onyx.trans" /> -->
<xacro:include filename="$(find new_description)/urdf/onyx.gazebo" />


<xacro:property name="rpm_to_Radps" value="${2*pi/60.0}" />     <!-- rotations per minute to Rad per second conversion -->
<xacro:property name="velocity_scaling" value="0.8" />     <!-- allows to scale all max velocities down at once -->

<xacro:macro name="aaa_joint_limits" params="lower:=0.0 upper:=0.0 velocity:=${rpm_to_Radps} effort:=100.0">
  <limit lower="${lower}" upper="${upper}" velocity="${velocity}" effort="${effort}"/>
</xacro:macro>

<xacro:property name="joint1_limits">
  <xacro:aaa_joint_limits lower="${-3/2*pi}" upper="${3/2*pi}" velocity="${1.83 * rpm_to_Radps * velocity_scaling}" />
</xacro:property>

<xacro:property name="joint2_limits">
  <xacro:aaa_joint_limits lower="${-pi}" upper="${pi}" velocity="${1.377 * rpm_to_Radps * velocity_scaling}" />
</xacro:property>

<xacro:property name="joint3_limits">
  <xacro:aaa_joint_limits lower="${-pi}" upper="${pi}" velocity="${1.377 * rpm_to_Radps * velocity_scaling}" />
</xacro:property>

<xacro:property name="joint4_limits">
  <xacro:aaa_joint_limits lower="${-3/2*pi}" upper="${3/2*pi}" velocity="${1.83 * rpm_to_Radps * velocity_scaling}" />
</xacro:property>

<xacro:property name="joint5_limits">
  <xacro:aaa_joint_limits lower="${-pi}" upper="${pi}" velocity="${1.83 * rpm_to_Radps * velocity_scaling}" />
</xacro:property>

<xacro:property name="joint6_limits">
  <xacro:aaa_joint_limits lower="${-2*pi}" upper="${2*pi}" velocity="${1.83 * rpm_to_Radps * velocity_scaling}" />
</xacro:property>

<xacro:property name="finger_limits">
  <xacro:aaa_joint_limits lower="${-pi}" upper="${pi}" velocity="${10 * rpm_to_Radps}" />
</xacro:property>


<link name="base_link">
  <inertial>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <mass value="10"/>
    <!-- <inertia ixx="0.00171" iyy="0.00171" izz="0.003332" ixy="-0.0" iyz="0.0" ixz="0.0"/> -->
    <inertia ixx="0.866667" iyy="0.241667" izz="11.4583" ixy="0" iyz="0" ixz="0"/>
  </inertial>
  <visual>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <geometry>
      <box size="0.5 1 0.2"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <geometry>
      <box size="0.5 1 0.2"/>
    </geometry>
  </collision>
</link>

<link name="link0">
  <inertial>
    <origin xyz="1.1956123958086707e-13 -3.565798973482466e-17 0.006224605561972922" rpy="0 0 0"/>
    <mass value="1.001112718637754"/>
    <inertia ixx="0.00171" iyy="0.00171" izz="0.003332" ixy="-0.0" iyz="0.0" ixz="0.0"/>
  </inertial>
  <visual>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/base_link.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/base_link.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<link name="link1">
  <inertial>
    <origin xyz="-0.021682763192533625 -0.00019343861423738655 -0.1015440461378264" rpy="0 0 0"/>
    <mass value="4.6341269008415775"/>
    <inertia ixx="0.020818" iyy="0.028645" izz="0.018526" ixy="9.3e-05" iyz="8e-06" ixz="-0.002659"/>
  </inertial>
  <visual>
    <origin xyz="-0.0 -0.0 -0.0" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/2j_simplified_v2_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin xyz="-0.0 -0.0 -0.0" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/2j_simplified_v2_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<link name="link2">
  <inertial>
    <origin xyz="0.011067557585023063 -0.18599999999999753 -3.608224830031759e-16" rpy="0 0 0"/>
    <mass value="3.1139206406559206"/>
    <inertia ixx="0.069339" iyy="0.005977" izz="0.067529" ixy="-0.0" iyz="-0.0" ixz="-0.0"/>
  </inertial>
  <visual>
    <origin xyz="0.1185 0.0 0.1185" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/1.2_tube_1_single_component_v2_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin xyz="0.1185 0.0 0.1185" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/1.2_tube_1_single_component_v2_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<link name="link3">
  <inertial>
    <origin xyz="0.10154404613781516 -0.021682763192532595 0.00019343861423570807" rpy="0 0 0"/>
    <mass value="4.6341269008415775"/>
    <inertia ixx="0.018526" iyy="0.020818" izz="0.028645" ixy="0.002659" iyz="-9.3e-05" ixz="8e-06"/>
  </inertial>
  <visual>
    <origin xyz="0.1185 0.372 0.1185" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/2j_simplified_v2_2.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin xyz="0.1185 0.372 0.1185" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/2j_simplified_v2_2.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<link name="link4">
  <inertial>
    <origin xyz="0.003331504937314443 -0.15487679697152384 4.925226892993351e-14" rpy="0 0 0"/>
    <mass value="2.3051495546208427"/>
    <inertia ixx="0.027883" iyy="0.004302" izz="0.026991" ixy="0.00098" iyz="0.0" ixz="-0.0"/>
  </inertial>
  <visual>
    <origin xyz="0.0 0.4905 0.1185" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/1.2_tube_2_single_component_v2_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin xyz="0.0 0.4905 0.1185" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/1.2_tube_2_single_component_v2_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<link name="link5">
  <inertial>
    <origin xyz="-0.10154404613785854 -0.021682763192527488 -0.00019343861423763709" rpy="0 0 0"/>
    <mass value="4.6341269008415775"/>
    <inertia ixx="0.018526" iyy="0.020818" izz="0.028645" ixy="-0.002659" iyz="9.3e-05" ixz="8e-06"/>
  </inertial>
  <visual>
    <origin xyz="-0.016 0.7625 0.1185" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/2j_simplified_v2_3.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin xyz="-0.016 0.7625 0.1185" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/2j_simplified_v2_3.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<link name="link6">
  <inertial>
    <origin xyz="-0.0003178609482610145 -0.06769985638413722 -0.0002575140808085824" rpy="0 0 0"/>
    <mass value="0.236737000660016"/>
    <inertia ixx="0.000328" iyy="0.00022" izz="0.000476" ixy="4e-06" iyz="-1e-06" ixz="0.0"/>
  </inertial>
  <visual>
    <origin xyz="0.1025 0.881 0.1185" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/1.2_gripper_single_component_v2_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin xyz="0.1025 0.881 0.1185" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/1.2_gripper_single_component_v2_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<link name="Arm_A_v6_1">
  <inertial>
    <origin xyz="0.01895133656779084 -0.03443129704231196 -0.003749999923799513" rpy="0 0 0"/>
    <mass value="0.11091056155247334"/>
    <inertia ixx="0.000106" iyy="1.4e-05" izz="0.000118" ixy="-1.1e-05" iyz="0.0" ixz="-0.0"/>
  </inertial>
  <visual>
    <origin xyz="0.0875 0.9625 0.141" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/Arm_A_v6_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin xyz="0.0875 0.9625 0.141" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/Arm_A_v6_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<link name="Arm_A_v6_2">
  <inertial>
    <origin xyz="-0.018951336567878035 -0.03443129704230807 -0.0037500000762014374" rpy="0 0 0"/>
    <mass value="0.11091056155247334"/>
    <inertia ixx="0.000106" iyy="1.4e-05" izz="0.000118" ixy="1.1e-05" iyz="-0.0" ixz="-0.0"/>
  </inertial>
  <visual>
    <origin xyz="0.1175 0.9625 0.141" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/Arm_A_v6_2.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin xyz="0.1175 0.9625 0.141" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/Arm_A_v6_2.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<link name="Hand_v3_2">
  <inertial>
    <origin xyz="0.00933673220576138 -8.5407306888996e-06 0.022500003616503783" rpy="0 0 0"/>
    <mass value="0.21086382762249625"/>
    <inertia ixx="3.4e-05" iyy="5.6e-05" izz="3.6e-05" ixy="-0.0" iyz="-0.0" ixz="0.0"/>
  </inertial>
  <visual>
    <origin xyz="0.084582 1.04908 0.141" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/Finger_v1_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin xyz="0.084582 1.04908 0.141" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/Finger_v1_1.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>

<link name="Hand_v3_1">
  <inertial>
    <origin xyz="-0.009336732205854098 -8.540730685568931e-06 0.02249999638349527" rpy="0 0 0"/>
    <mass value="0.21086382762249625"/>
    <inertia ixx="3.4e-05" iyy="5.6e-05" izz="3.6e-05" ixy="0.0" iyz="0.0" ixz="0.0"/>
  </inertial>
  <visual>
    <origin xyz="0.120418 1.04908 0.141" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/Finger_v1_2.stl" scale="0.001 0.001 0.001"/>
    </geometry>
    <material name="silver"/>
  </visual>
  <collision>
    <origin xyz="0.120418 1.04908 0.141" rpy="0 0 0"/>
    <geometry>
      <mesh filename="file://$(find new_description)/new_meshes/Finger_v1_2.stl" scale="0.001 0.001 0.001"/>
    </geometry>
  </collision>
</link>



<joint name="arm_fixation" type="fixed">
  <origin xyz="0.0 0.4 0.11" rpy="${pi} 0 0"/>
  <parent link="base_link"/>
  <child link="link0"/>
  <xacro:insert_block name="joint1_limits"/>
</joint>

<joint name="hd_joint1" type="revolute">
  <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>
  <parent link="link0"/>
  <child link="link1"/>
  <axis xyz="0.0 0.0 1.0"/>
  <xacro:insert_block name="joint1_limits"/>
</joint>

<joint name="hd_joint2" type="revolute">
  <origin xyz="-0.1185 -0.0 -0.1185" rpy="${pi/2} 0 0"/>
  <parent link="link1"/>
  <child link="link2"/>
  <axis xyz="1.0 -0.0 -0.0"/>
  <xacro:insert_block name="joint2_limits"/>
</joint>

<joint name="hd_joint3" type="revolute">
  <origin xyz="0.0 -0.372 0.0" rpy="0 0 0"/>
  <parent link="link2"/>
  <child link="link3"/>
  <axis xyz="-1.0 0.0 0.0"/>
  <xacro:insert_block name="joint3_limits"/>
</joint>

<joint name="hd_joint4" type="revolute">
  <origin xyz="0.1185 -0.1185 0.0" rpy="0 0 0"/>
  <parent link="link3"/>
  <child link="link4"/>
  <axis xyz="0.0 1.0 0.0"/>
  <xacro:insert_block name="joint4_limits"/>
</joint>

<joint name="hd_joint5" type="revolute">
  <origin xyz="0.016 -0.272 0.0" rpy="0 0 0"/>
  <parent link="link4"/>
  <child link="link5"/>
  <axis xyz="1.0 -0.0 -0.0"/>
  <xacro:insert_block name="joint5_limits"/>
</joint>

<joint name="hd_joint6" type="revolute">
  <origin xyz="-0.1185 -0.1185 0.0" rpy="0 0 0"/>
  <parent link="link5"/>
  <child link="link6"/>
  <axis xyz="0.0 1.0 0.0"/>
  <xacro:insert_block name="joint6_limits"/>
</joint>

<joint name="finger_joint1" type="continuous">
  <origin xyz="0.015 -0.0815 -0.0225" rpy="0 0 0"/>
  <parent link="link6"/>
  <child link="Arm_A_v6_1"/>
  <axis xyz="0.0 0.0 1.0"/>
</joint>

<joint name="finger_joint2" type="continuous">
  <origin xyz="-0.015 -0.0815 -0.0225" rpy="0 0 0"/>
  <parent link="link6"/>
  <child link="Arm_A_v6_2"/>
  <axis xyz="0.0 0.0 1.0"/>
  <mimic joint="finger_joint1" multiplier="-1"/>
</joint>

<joint name="finger_joint3" type="continuous">
  <origin xyz="0.002918 -0.08658 0.0" rpy="0 0 0"/>
  <parent link="Arm_A_v6_1"/>
  <child link="Hand_v3_2"/>
  <axis xyz="-0.0 -0.0 -1.0"/>
  <mimic joint="finger_joint1" multiplier="1"/>
</joint>

<joint name="finger_joint4" type="continuous">
  <origin xyz="-0.002918 -0.08658 0.0" rpy="0 0 0"/>
  <parent link="Arm_A_v6_2"/>
  <child link="Hand_v3_1"/>
  <axis xyz="0.0 0.0 1.0"/>
  <mimic joint="finger_joint1" multiplier="1"/>
</joint>

</robot>
